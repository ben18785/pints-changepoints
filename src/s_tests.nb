(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 11.2' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[      9220,        252]
NotebookOptionsPosition[      8294,        229]
NotebookOutlinePosition[      8642,        244]
CellTagsIndexPosition[      8599,        241]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[
 RowBox[{
  RowBox[{"SetDirectory", "[", 
   RowBox[{"NotebookDirectory", "[", "]"}], "]"}], ";"}]], "Input",
 CellChangeTimes->{{3.766828369395854*^9, 
  3.766828374483243*^9}},ExpressionUUID->"701c834e-8418-4ab8-9010-\
6c7636cc5b41"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"fGetData", "[", "filename_", "]"}], ":=", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
      RowBox[{"data", "=", 
       RowBox[{"fImportData", "[", "filename", "]"}]}], ",", "pos", ",", 
      "posdate", ",", "date"}], "}"}], ",", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"Length", "@", "data"}], "\[GreaterEqual]", "12"}], ",", 
      RowBox[{
       RowBox[{"pos", "=", 
        RowBox[{
         RowBox[{"Position", "[", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"StringContainsQ", "[", 
              RowBox[{"#", ",", 
               RowBox[{
               "\"\<kld:\>\"", "|", "\"\<kld_2:\>\"", "|", 
                "\"\<fbest_relative:\>\""}]}], "]"}], "&"}], "/@", 
            RowBox[{"(", 
             RowBox[{"ToString", "/@", "data"}], ")"}]}], ",", "True"}], 
          "]"}], "[", 
         RowBox[{"[", 
          RowBox[{"1", ",", "1"}], "]"}], "]"}]}], ";", 
       RowBox[{"posdate", "=", 
        RowBox[{
         RowBox[{"Position", "[", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"StringContainsQ", "[", 
              RowBox[{"#", ",", "\"\<date:\>\""}], "]"}], "&"}], "/@", 
            RowBox[{"(", 
             RowBox[{"ToString", "/@", "data"}], ")"}]}], ",", "True"}], 
          "]"}], "[", 
         RowBox[{"[", 
          RowBox[{"1", ",", "1"}], "]"}], "]"}]}], ";", 
       RowBox[{"date", "=", 
        RowBox[{"DateList", "[", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"StringTake", "[", 
            RowBox[{
             RowBox[{"data", "[", 
              RowBox[{"[", "posdate", "]"}], "]"}], ",", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{
                RowBox[{
                 RowBox[{"StringPosition", "[", 
                  RowBox[{
                   RowBox[{"data", "[", 
                    RowBox[{"[", "posdate", "]"}], "]"}], ",", "\"\<:\>\""}], 
                  "]"}], "[", 
                 RowBox[{"[", 
                  RowBox[{"1", ",", "1"}], "]"}], "]"}], "+", "1"}], ",", 
               RowBox[{"StringLength", "@", 
                RowBox[{"data", "[", 
                 RowBox[{"[", "posdate", "]"}], "]"}]}]}], "}"}]}], "]"}], 
           ",", 
           RowBox[{"{", 
            RowBox[{
            "\"\<Year\>\"", ",", "\"\<Month\>\"", ",", "\"\<Day\>\"", ",", 
             "\"\<Hour\>\"", ",", "\"\<Minute\>\"", ",", "\"\<Second\>\""}], 
            "}"}]}], "}"}], "]"}]}], ";", 
       RowBox[{"{", 
        RowBox[{"date", ",", 
         RowBox[{"Read", "[", 
          RowBox[{
           RowBox[{"StringToStream", "[", 
            RowBox[{"StringTake", "[", 
             RowBox[{
              RowBox[{"data", "[", 
               RowBox[{"[", "pos", "]"}], "]"}], ",", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{
                 RowBox[{
                  RowBox[{"StringPosition", "[", 
                   RowBox[{
                    RowBox[{"data", "[", 
                    RowBox[{"[", "pos", "]"}], "]"}], ",", "\"\<:\>\""}], 
                   "]"}], "[", 
                  RowBox[{"[", 
                   RowBox[{"1", ",", "1"}], "]"}], "]"}], "+", "1"}], ",", 
                RowBox[{"StringLength", "@", 
                 RowBox[{"data", "[", 
                  RowBox[{"[", "pos", "]"}], "]"}]}]}], "}"}]}], "]"}], "]"}],
            ",", "Number"}], "]"}]}], "}"}]}], ",", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"-", "1"}], ",", 
        RowBox[{"-", "1"}]}], "}"}]}], "]"}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"fImportData", "[", "filename_", "]"}], ":=", 
  RowBox[{"Import", "[", 
   RowBox[{
    RowBox[{"StringJoin", "[", 
     RowBox[{"\"\<../data/\>\"", ",", "filename"}], "]"}], ",", 
    "\"\<Data\>\""}], "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"fGetAllData", "[", "filebase_", "]"}], ":=", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"files", ",", "test"}], "}"}], ",", 
    RowBox[{
     RowBox[{"files", "=", 
      RowBox[{"SetDirectory", "[", "\"\<../data/\>\"", "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"files", "=", 
      RowBox[{"FileNames", "[", 
       RowBox[{"StringJoin", "[", 
        RowBox[{"filebase", ",", " ", "\"\<*\>\""}], "]"}], "]"}]}], ";", 
     RowBox[{"SetDirectory", "[", 
      RowBox[{"NotebookDirectory", "[", "]"}], "]"}], ";", 
     RowBox[{"test", "=", 
      RowBox[{"fGetData", "/@", "files"}]}], ";", 
     RowBox[{"DeleteCases", "[", 
      RowBox[{"test", ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"-", "1"}], ",", 
         RowBox[{"-", "1"}]}], "}"}]}], "]"}]}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"fGetAllDataExport", "[", "filebase_", "]"}], ":=", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"data", "=", 
      RowBox[{"fGetAllData", "[", "filebase", "]"}]}], "}"}], ",", 
    RowBox[{
     RowBox[{"data", "=", 
      RowBox[{"Flatten", "/@", "data"}]}], ";", 
     RowBox[{"Export", "[", 
      RowBox[{
       RowBox[{"StringJoin", "[", 
        RowBox[{"\"\<../cleaned/\>\"", ",", "filebase", ",", "\"\<.csv\>\""}],
         "]"}], ",", "data"}], "]"}]}]}], "]"}]}]}], "Input",
 CellChangeTimes->{{3.7668291334487734`*^9, 3.7668292005322876`*^9}, {
   3.766829573130748*^9, 3.7668296200013323`*^9}, {3.7668296703232775`*^9, 
   3.7668296851273336`*^9}, {3.7668298538931456`*^9, 3.766829855640668*^9}, {
   3.7668301344664707`*^9, 3.766830186034517*^9}, {3.7668302351514287`*^9, 
   3.7668302423349743`*^9}, {3.7668303478011065`*^9, 3.766830400780598*^9}, {
   3.766834114304693*^9, 3.7668341985205517`*^9}, {3.766834246227544*^9, 
   3.7668342464637365`*^9}, {3.7668372046546793`*^9, 3.766837267581715*^9}, {
   3.76683744949492*^9, 3.766837452320052*^9}, 3.7668387583677263`*^9, {
   3.766838865471404*^9, 3.766838877480547*^9}, {3.766839446546814*^9, 
   3.7668394476113663`*^9}},ExpressionUUID->"400ba35f-24e6-4e97-b6db-\
606752ef99d0"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"fGetAllDataExport", "[", "\"\<opt_fn_SNES\>\"", "]"}]], "Input",
 CellChangeTimes->{{3.7668372725739603`*^9, 3.7668372980794983`*^9}, 
   3.766837970144764*^9, {3.7668383560475206`*^9, 3.766838358130146*^9}, 
   3.7668385428889184`*^9, {3.766838895746705*^9, 
   3.7668388966176076`*^9}},ExpressionUUID->"55c1260b-a8ec-4d38-b364-\
8f9bfebd6a29"],

Cell[BoxData["\<\"../cleaned/opt_fn_SNES.csv\"\>"], "Output",
 CellChangeTimes->{3.766838575534672*^9, 3.7668389619762897`*^9, 
  3.7668395599017887`*^9},ExpressionUUID->"2ee50ea5-a9c6-4d72-936b-\
51c618cfaca6"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"data", "=", 
   RowBox[{
   "fImportData", "[", "\"\<opt_fn_SNES-2019-04-04-01_01_14.txt\>\"", "]"}]}],
   ";"}]], "Input",
 CellChangeTimes->{{3.766839390753044*^9, 
  3.7668394188720217`*^9}},ExpressionUUID->"367089a7-20f7-4f85-9a4e-\
dd727038630d"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"data", "[", 
  RowBox[{"[", "5", "]"}], "]"}]], "Input",
 CellChangeTimes->{{3.7668394199535975`*^9, 
  3.7668394425444736`*^9}},ExpressionUUID->"ab5078d7-fb0d-477e-88bf-\
9d0270a9a4d6"],

Cell[BoxData["\<\"fbest_relative:  9.97912777596412504e-01\"\>"], "Output",
 CellChangeTimes->{{3.766839422002581*^9, 
  3.766839442941867*^9}},ExpressionUUID->"ba5a9b94-c3a0-4b37-96b4-\
2e29e93adf2a"]
}, Open  ]]
},
WindowSize->{1536, 781},
WindowMargins->{{-8, Automatic}, {Automatic, -8}},
FrontEndVersion->"11.2 for Microsoft Windows (64-bit) (September 10, 2017)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 249, 6, 28, "Input",ExpressionUUID->"701c834e-8418-4ab8-9010-6c7636cc5b41"],
Cell[810, 28, 6120, 158, 201, "Input",ExpressionUUID->"400ba35f-24e6-4e97-b6db-606752ef99d0"],
Cell[CellGroupData[{
Cell[6955, 190, 369, 6, 28, "Input",ExpressionUUID->"55c1260b-a8ec-4d38-b364-8f9bfebd6a29"],
Cell[7327, 198, 211, 3, 32, "Output",ExpressionUUID->"2ee50ea5-a9c6-4d72-936b-51c618cfaca6"]
}, Open  ]],
Cell[7553, 204, 286, 8, 28, "Input",ExpressionUUID->"367089a7-20f7-4f85-9a4e-dd727038630d"],
Cell[CellGroupData[{
Cell[7864, 216, 210, 5, 28, "Input",ExpressionUUID->"ab5078d7-fb0d-477e-88bf-9d0270a9a4d6"],
Cell[8077, 223, 201, 3, 32, "Output",ExpressionUUID->"ba5a9b94-c3a0-4b37-96b4-2e29e93adf2a"]
}, Open  ]]
}
]
*)

